# MrgqPdfViewer v0.2.x 개발 로드맵

**날짜**: 2025-07-27  
**현재 버전**: v0.1.10  
**계획 버전**: v0.2.x  
**상태**: 📋 계획 단계

## 🎯 개발 방향

v0.1.x에서 PDF 뷰어의 **핵심 기능과 안정성**을 완성했다면, v0.2.x에서는 **고급 협업 기능과 사용자 경험**을 대폭 향상시키는 것이 목표입니다.

## 🚀 주요 신규 기능

### 1. 실시간 마우스 포인터 공유 🖱️

**개요**: 지휘자의 마우스 포인터를 모든 연주자 화면에 실시간으로 표시

**핵심 기능**:
- 지휘자 화면의 마우스 좌표 실시간 추적
- WebSocket을 통한 마우스 이벤트 브로드캐스트
- 연주자 화면에 반투명 포인터 오버레이 표시
- 포인터 애니메이션 및 클릭 효과

**기술적 고려사항**:
- 좌표 정규화 (화면 크기 차이 대응)
- 네트워크 지연 최소화 (throttling 적용)
- 포인터 렌더링 성능 최적화
- 배터리 사용량 고려

**예상 구현 난이도**: ⭐⭐⭐

### 2. 하이라이트 및 주석 시스템 ✏️

**개요**: 실시간으로 PDF에 하이라이트, 메모, 도형을 그려서 공유

**핵심 기능**:
- **하이라이트**: 텍스트 영역 형광펜 효과
- **자유 그리기**: 펜 도구로 임의 선 그리기
- **도형 도구**: 원, 사각형, 화살표 추가
- **텍스트 메모**: 특정 위치에 텍스트 주석
- **실시간 동기화**: 모든 연주자에게 즉시 공유
- **레이어 관리**: 주석 표시/숨김 토글

**기술적 고려사항**:
- Canvas 오버레이 시스템 구축
- 벡터 기반 주석 데이터 구조
- 주석 데이터 직렬화/역직렬화
- PDF 좌표계와 화면 좌표계 매핑
- 두 페이지 모드에서의 주석 처리
- 주석 데이터 영속성 (선택사항)

**예상 구현 난이도**: ⭐⭐⭐⭐⭐

### 3. 고급 협업 기능 🎼

**개요**: 현재 기본적인 페이지 동기화를 넘어선 고급 협업 도구

**핵심 기능**:
- **음성 채팅 (선택사항)**: 실시간 음성 통신
- **채팅 시스템**: 텍스트 메시지 교환
- **세션 관리**: 연주자 목록, 권한 관리
- **템포 동기화**: 메트로놈 공유 기능
- **파트별 관리**: 연주자를 파트별로 그룹화
- **녹음 기능**: 연주 세션 기록

**기술적 고려사항**:
- WebRTC 구현 (음성 채팅)
- 사용자 인증 및 세션 관리
- 실시간 메시징 아키텍처
- 권한 기반 기능 제어
- 대용량 데이터 처리 (녹음)

**예상 구현 난이도**: ⭐⭐⭐⭐

## 🔧 기술적 개선사항

### 1. 성능 최적화

**메모리 최적화**:
- 페이지 캐시 알고리즘 개선
- 비트맵 풀링 시스템 도입
- 백그라운드 메모리 정리 자동화

**렌더링 최적화**:
- GPU 가속 렌더링 검토
- 적응형 해상도 시스템
- 프리렌더링 범위 동적 조정

### 2. 사용자 인터페이스 개선

**접근성 향상**:
- 화면 확대/축소 기능
- 고대비 모드 지원
- 키보드 단축키 확장

**사용자 설정 확장**:
- 테마 시스템 (다크/라이트/커스텀)
- 사용자별 설정 프로필
- 클라우드 설정 동기화 (선택사항)

### 3. 보안 강화

**네트워크 보안**:
- WSS (WebSocket Secure) 재도입
- 인증서 피닝 구현
- 사용자 인증 시스템

**데이터 보안**:
- PDF 파일 암호화 지원
- 세션별 데이터 격리
- 임시 데이터 자동 정리

## 📅 개발 일정 (예상)

### Phase 1: 기반 구축 (2주)
- [ ] Canvas 오버레이 시스템 구현
- [ ] 좌표 시스템 통합 및 정규화
- [ ] 기본 그리기 도구 구현

### Phase 2: 마우스 포인터 공유 (1주)
- [ ] 마우스 이벤트 캡처 및 전송
- [ ] 포인터 렌더링 시스템
- [ ] 네트워크 최적화

### Phase 3: 하이라이트 시스템 (3주)
- [ ] 하이라이트 도구 구현
- [ ] 자유 그리기 기능
- [ ] 도형 및 텍스트 주석
- [ ] 레이어 관리 시스템

### Phase 4: 고급 협업 기능 (2-3주)
- [ ] 채팅 시스템 구현
- [ ] 세션 관리 기능
- [ ] 음성 채팅 검토 및 구현 (선택)

### Phase 5: 통합 테스트 및 최적화 (1주)
- [ ] 전체 기능 통합 테스트
- [ ] 성능 최적화
- [ ] 버그 수정 및 안정화

**총 예상 개발 기간**: 8-10주

## 🎨 UI/UX 개선 계획

### 주석 도구 패널
- 화면 측면에 접을 수 있는 도구 패널
- 펜 굵기, 색상, 투명도 조절
- 도구별 단축키 지원

### 협업 상태 표시
- 실시간 연결 상태 인디케이터
- 연주자별 색상 구분 시스템
- 네트워크 품질 표시

### 설정 화면 확장
- 주석 관련 설정 추가
- 네트워크 설정 고급화
- 성능 설정 옵션 추가

## ⚡ 성능 목표

| 항목 | 현재 (v0.1.9+) | 목표 (v0.2.x) |
|------|----------------|----------------|
| 메모리 사용량 | 기준선 | +10% 이내 |
| 페이지 전환 속도 | ~100ms | <80ms |
| 네트워크 지연 | ~50-150ms | <100ms |
| 주석 렌더링 | N/A | <16ms (60fps) |
| 배터리 사용량 | 기준선 | +15% 이내 |

## 🧪 테스트 계획

### 기능 테스트
- 다양한 해상도에서 주석 정확성 검증
- 네트워크 불안정 상황에서 동기화 테스트
- 대용량 PDF 파일에서 성능 테스트

### 사용성 테스트
- 실제 합주 환경에서 사용자 테스트
- 다양한 Android TV 기기에서 호환성 확인
- 접근성 기능 검증

### 성능 테스트
- 메모리 누수 검사
- 장시간 사용 안정성 테스트
- 다중 사용자 동시 접속 테스트

## 🤔 도전 과제

### 기술적 도전
1. **실시간 성능**: 60fps 유지하면서 실시간 주석 렌더링
2. **좌표 정확성**: 다양한 화면 크기에서 픽셀 단위 정확성
3. **메모리 관리**: 주석 데이터 증가에 따른 메모리 최적화
4. **네트워크 효율성**: 대량 주석 데이터의 효율적 전송

### 사용자 경험 도전
1. **직관적 UI**: 복잡한 기능을 TV 리모컨으로 쉽게 조작
2. **학습 곡선**: 새로운 기능들의 사용법 습득 용이성
3. **안정성**: 고급 기능 추가에도 기존 안정성 유지

## 📚 관련 기술 조사 필요

- **Canvas API 고급 기능**: Path, 베지어 곡선, 그라디언트
- **WebRTC**: P2P 음성 통신 구현
- **벡터 그래픽**: SVG 기반 주석 시스템
- **실시간 협업**: Operational Transform, CRDT 등
- **성능 프로파일링**: Android GPU 프로파일링 도구

## 🎯 성공 지표

- [ ] 마우스 포인터 지연 <100ms
- [ ] 주석 렌더링 60fps 유지
- [ ] 10명 이상 동시 협업 지원
- [ ] 메모리 사용량 증가 <10%
- [ ] 사용자 만족도 조사 4.5/5.0 이상

---

**참고**: 이 로드맵은 현재 계획이며, 개발 과정에서 우선순위나 일정이 조정될 수 있습니다. 각 기능의 구현 여부와 범위는 기술적 검토와 사용자 피드백을 바탕으로 최종 결정됩니다.