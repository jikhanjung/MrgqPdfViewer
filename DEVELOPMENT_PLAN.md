# 🚀 MrgqPdfViewer 개발 계획

## 🎯 개발 목표
Android TV용 PDF 악보 리더 앱 개발 (Z18TV Pro 최적화)

---

## 📅 개발 단계별 계획

### **1단계: 프로젝트 초기 설정 (1-2일)**
- [ ] Android Studio에서 새 프로젝트 생성
- [ ] `minSdkVersion: 21` (Android 5.0+), `targetSdkVersion: 33+` 설정
- [ ] TV 지원 설정 (`android:banner`, `LEANBACK_LAUNCHER` 추가)
- [ ] 기본 Activity 생성 및 TV UI 레이아웃 설정
- [ ] 필요한 권한 추가 (저장소, 네트워크)

### **2단계: 파일 목록 기능 구현 (3-4일)**
- [ ] 파일 시스템 접근 권한 처리
- [ ] PDF 파일 스캔 및 필터링 로직
- [ ] RecyclerView로 파일 목록 UI 구성
- [ ] 리모컨 입력 처리 (DPAD 탐색)
- [ ] 파일 선택 및 하이라이트 기능

### **3단계: PDF 뷰어 기능 구현 (4-5일)**
- [ ] PdfRenderer 초기화 및 PDF 파일 로드
- [ ] 페이지 Bitmap 렌더링 구현
- [ ] 전체 화면 이미지 표시 Activity
- [ ] 리모컨 좌/우 버튼으로 페이지 이동
- [ ] 페이지 번호 표시 UI

### **4단계: 웹 서버 구현 (3-4일)**
- [ ] HTTP 서버 라이브러리 선택 (NanoHTTPD 추천)
- [ ] 파일 업로드 HTML 페이지 작성
- [ ] 멀티파트 폼 데이터 처리
- [ ] 업로드된 파일 저장 로직
- [ ] 서버 시작/중지 기능

### **5단계: 통합 및 최적화 (2-3일)**
- [ ] 각 기능 간 연동 테스트
- [ ] 메모리 관리 최적화 (큰 PDF 파일 처리)
- [ ] 에러 처리 및 예외 상황 대응
- [ ] UI/UX 개선 및 TV 화면 최적화

### **6단계: 테스트 및 디버깅 (2-3일)**
- [ ] 실제 TV 기기에서 테스트
- [ ] 리모컨 반응성 테스트
- [ ] 다양한 크기의 PDF 파일 테스트
- [ ] 네트워크 연결 상태별 테스트

---

## 🏗️ 기술적 구현 순서

### **핵심 클래스 구조**
```
MainActivity (파일 목록)
├── FileListAdapter (RecyclerView)
├── PdfViewerActivity (PDF 뷰어)
├── WebServerManager (HTTP 서버)
└── FileManager (파일 작업)
```

### **주요 구현 포인트**

#### 1. 파일 접근
- API 29+ scoped storage 고려
- 권한 요청 처리
- 외부 저장소 접근 최적화

#### 2. PDF 렌더링
- PdfRenderer 메모리 관리
- 페이지 캐싱 전략
- 대용량 파일 처리

#### 3. 리모컨 처리
- KeyEvent.KEYCODE_DPAD_* 처리
- 포커스 관리
- 사용자 입력 반응성

#### 4. 웹 서버
- 백그라운드 서비스 구현
- 파일 업로드 진행률 표시
- 네트워크 보안 고려

---

## 🎯 개발 우선순위

### **Phase 1: 필수 기능 (1-2주)**
1. 파일 목록 표시
2. PDF 뷰어 구현
3. 리모컨 탐색 기능

### **Phase 2: 편의 기능 (3-4주)**
1. 웹 서버 구현
2. 업로드 UI 개발
3. 파일 관리 기능

### **Phase 3: 최적화 (4-5주)**
1. 성능 튜닝
2. 메모리 관리
3. 사용자 경험 개선

---

## 🧪 테스트 전략

### **단위 테스트**
- 파일 처리 로직
- PDF 렌더링 함수
- 네트워크 통신

### **통합 테스트**
- 리모컨 입력 처리
- 화면 전환 동작
- 파일 업로드 플로우

### **실기기 테스트**
- TV에서 실제 동작 확인
- 리모컨 반응성 검증
- 다양한 PDF 파일 테스트

---

## 📦 필요한 라이브러리 및 도구

### **필수 라이브러리**
- AndroidX 라이브러리
- PdfRenderer (Android SDK 내장)
- NanoHTTPD (HTTP 서버)

### **권장 라이브러리**
- Kotlin Coroutines (비동기 처리)
- Gson (JSON 처리)
- Glide (이미지 로딩)

### **개발 도구**
- Android Studio
- ADB (디버깅)
- TV 에뮬레이터

---

## 🎖️ 성공 지표

### **기능적 목표**
- [ ] PDF 파일 목록 표시
- [ ] 리모컨으로 파일 선택
- [ ] PDF 페이지 렌더링
- [ ] 페이지 이동 기능
- [ ] 웹 기반 파일 업로드

### **성능 목표**
- [ ] 3초 이내 앱 시작
- [ ] 1초 이내 페이지 이동
- [ ] 10MB 이하 메모리 사용
- [ ] 끊김 없는 사용자 경험

---

## 🔄 향후 확장 계획

### **추가 기능**
- 음성 인식 페이지 넘기기
- 박수 소리 감지 기능
- 북마크 시스템
- 메타데이터 관리

### **기술 개선**
- 더 나은 PDF 렌더링
- 캐싱 시스템 최적화
- 보안 강화
- 다국어 지원

---

**예상 개발 기간: 2-3주**  
**핵심 개발자: 1명**  
**테스트 환경: Z18TV Pro**