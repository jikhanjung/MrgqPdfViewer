# MrgqPdfViewer 사용자 매뉴얼

## 🎵 1. MrgqPdfViewer 소개

**MrgqPdfViewer**는 Android TV에 최적화된 PDF 악보 뷰어 애플리케이션입니다. 단순히 PDF를 보는 것을 넘어, 여러 사용자가 실시간으로 악보를 동기화할 수 있는 강력한 **합주 모드(Ensemble Mode)**를 핵심 기능으로 제공합니다.

이 매뉴얼은 앱의 모든 기능을 최대한 활용하실 수 있도록 돕기 위해 제작되었습니다.

---

## 🖥️ 2. 시작하기: PDF 파일 추가하기

이 앱은 보안과 편의성을 위해 기기의 특정 폴더를 직접 탐색하는 대신, 내장된 웹 서버를 통해 파일을 추가하는 방식을 사용합니다.

**1단계: 웹 서버 활성화**
1.  앱 메인 화면에서 **설정**으로 이동합니다.
2.  **웹서버** 메뉴를 선택합니다.
3.  **웹서버 켜기** 옵션을 선택하여 서버를 활성화합니다.
4.  화면에 표시되는 **IP 주소와 포트**를 확인합니다. (예: `http://192.168.1.10:8080`)

**2단계: 파일 업로드**
1.  TV와 **동일한 Wi-Fi 네트워크에 연결된** 컴퓨터나 스마트폰에서 웹 브라우저를 엽니다.
2.  주소창에 위에서 확인한 IP 주소(예: `http://192.168.1.10:8080`)를 입력합니다.
3.  웹페이지가 열리면, '파일 선택' 버튼을 눌러 업로드할 PDF 악보 파일을 선택하고 업로드를 진행합니다.
4.  업로드가 완료되면 앱의 메인 화면에 해당 파일이 즉시 표시됩니다.

---

## 📄 3. 메인 화면 및 기본 조작

### 3.1. 파일 목록
*   메인 화면에는 업로드된 모든 PDF 파일이 목록 형태로 표시됩니다.
*   각 항목에는 파일명, 총 페이지 수, 파일 크기 등의 정보가 표시됩니다.
*   리모컨의 **방향키**를 사용하여 파일을 탐색할 수 있습니다.

### 3.2. 파일 열기
*   원하는 파일을 선택한 후 리모컨의 **확인(OK)** 버튼을 누르면 해당 악보가 뷰어 화면에 열립니다.

---

## 🎼 4. PDF 뷰어 화면: 악보 보기

### 4.1. 페이지 넘기기
*   **오른쪽 방향키**: 다음 페이지로 이동합니다.
*   **왼쪽 방향키**: 이전 페이지로 이동합니다.

### 4.2. 파일 간 이동
*   **마지막 페이지**에서 오른쪽 방향키를 누르면, 다음 파일로 넘어갈지 묻는 안내가 나타납니다.
*   **첫 페이지**에서 왼쪽 방향키를 누르면, 이전 파일로 넘어갈지 묻는 안내가 나타납니다.

### 4.3. 표시 옵션 메뉴
*   리모컨의 **확인(OK) 버튼을 길게(약 0.8초)** 누르면 PDF 표시 옵션 메뉴가 나타납니다.
*   **두 페이지 모드 전환:** 한 화면에 두 페이지를 나란히 보거나 한 페이지만 크게 볼 수 있습니다.
*   **위/아래 클리핑 설정:** 악보의 위아래 불필요한 여백을 잘라내어 악보를 더 크게 표시할 수 있습니다.
*   **가운데 여백 설정:** 두 페이지 모드일 때, 두 페이지 사이의 간격을 조절할 수 있습니다.

### 4.4. 페이지 정보 표시
*   화면 하단에 현재 파일명과 페이지 번호가 희미하게 표시됩니다.
*   이 정보는 **설정 > 시스템 > 페이지 정보 표시** 옵션을 통해 완전히 숨길 수 있습니다.

---

## 🎻 5. 합주 모드 (Ensemble Mode)

합주 모드는 한 명의 **지휘자(Conductor)**와 여러 명의 **연주자(Performer)**로 구성됩니다. 지휘자가 파일을 열거나 페이지를 넘기면, 모든 연주자의 화면이 실시간으로 동기화됩니다.

### 5.1. 지휘자(Conductor) 되기
1.  **설정 > 합주 모드**로 이동합니다.
2.  **지휘자 모드 활성화**를 선택합니다.
3.  이제 당신의 기기가 지휘자가 되었습니다. 메인 화면으로 돌아와 악보를 열면 다른 연주자들이 접속할 수 있습니다.

### 5.2. 연주자(Performer) 되기
1.  **설정 > 합주 모드**로 이동합니다.
2.  **연주자 모드 활성화**를 선택합니다.
3.  **지휘자 찾기**를 선택하면, 같은 네트워크에 있는 지휘자 기기를 자동으로 검색합니다.
4.  발견된 지휘자를 선택하여 연결합니다.
5.  연결이 완료되면, 지휘자가 파일을 열거나 페이지를 넘길 때 당신의 화면도 자동으로 따라 움직입니다.

### 5.3. 동기화되는 내용
*   **파일 열기/닫기:** 지휘자가 특정 파일을 열거나 목록으로 돌아가면 모든 연주자가 동기화됩니다.
*   **페이지 넘기기:** 지휘자가 페이지를 넘기면 모든 연주자의 페이지가 함께 넘어갑니다.

---

## ⚙️ 6. 설정 메뉴 상세

### 6.1. 파일 관리
*   저장된 PDF 파일의 개수를 확인하고 관리할 수 있습니다.

### 6.2. 웹서버
*   PDF 파일 업로드를 위한 내장 웹 서버를 켜고 끌 수 있습니다.

### 6.3. 합주 모드
*   지휘자 또는 연주자 역할을 활성화하거나, 합주 모드를 완전히 비활성화할 수 있습니다.

### 6.4. 애니메이션 & 사운드
*   **페이지 전환 애니메이션:** 페이지를 넘길 때 부드러운 슬라이드 효과를 켜거나 끌 수 있습니다.
*   **페이지 넘기기 사운드:** 페이지를 넘길 때 나는 효과음을 켜거나 끌 수 있습니다.
*   **사운드 볼륨:** 효과음의 크기를 슬라이더로 조절할 수 있습니다.
*   **애니메이션 속도:** 애니메이션 효과의 속도를 "즉시", "빠르게", "보통", "느리게" 등으로 조절할 수 있습니다. (TV 성능이 부족해 애니메이션이 끊길 경우 속도를 조절하면 도움이 됩니다.)

### 6.5. 시스템
*   **페이지 정보 표시:** 뷰어 화면 하단의 파일/페이지 정보 표시를 켜거나 끌 수 있습니다.

---

## ❓ 7. 문제 해결 (FAQ)

*   **Q: 합주 모드에서 여러 명이 접속하면 연결이 불안정해요.**
    *   A: 이 문제는 최근에 해결되었습니다. 이제 각 기기는 IP 주소로 식별되므로, 동일한 모델의 기기 여러 대가 동시에 접속해도 안정적으로 연결이 유지됩니다.

*   **Q: 지휘자가 두 번째 파일을 여는데 제 화면은 그대로예요.**
    *   A: 이 버그는 해결되었습니다. `MainActivity`의 생명주기에 맞춰 콜백을 재등록하도록 수정하여, 이제 지휘자가 몇 번째 파일을 열든 안정적으로 동기화됩니다.

*   **Q: 애니메이션을 켰더니 페이지 넘김 동기화가 안돼요.**
    *   A: 이 문제 역시 해결되었습니다. 애니메이션 재생 경로에서 누락되었던 동기화 신호 전송 로직을 추가하고, 상태 업데이트와 방송 시점을 일관되게 조정하여 이제 애니메이션 설정과 관계없이 항상 동기화가 정상적으로 작동합니다.

---
이 매뉴얼이 MrgqPdfViewer를 사용하는 데 도움이 되기를 바랍니다.